<div id="main">
  <h2>Select your horses for races at {{meeting.NAME}}. Going {{going}}</h2>
<table>
  <tr>
    <th colspan=2>
      Your Horses
    </th>
  </tr>
  <tr>
    <th>NAME</th>
    <th>FORM</th>
  </tr>
  <tr *ngFor="let horse of horses">
    <td>{{horse.NAME}}</td>

    <td *ngIf="horse.FORM">
      <ul *ngIf="horse.FORM">
        <li *ngFor="let f of horse.FORM">
          {{f.POSITION}}({{f.LENGTH_FURLONGS}}f, {{f.going}}),
        </li>
      </ul>
    </td>
  </tr>
</table>

  <div *ngIf="!(readyForBets && showSubmit)">
    <h4>Please select a different horse for each race</h4>
  </div>

<table>
  <tr>
    <th colspan =4>
      Your selections
    </th>
  </tr>
  <tr>
    <th>Race name</th>
    <th>Length in furlongs</th>
    <th>Prize</th>
    <th>Horse</th>
  </tr>
<tr *ngFor="let race of races">
  <td>{{race.NAME}},{{race.ID}}</td>
  <td>{{race.LENGTH_FURLONGS}}</td>
  <td>{{race.PRIZE}}</td>
  <td>
    <select *ngIf="horses && horses.length" class="horseSelector" (change)="this.handleHorseSelected()">
      <option *ngFor="let horse of horses">
        {{horse.NAME}}
      </option>
    </select>
  </td>
</tr>
</table>

<div *ngIf="showSubmit">
  <input type="button" value="Set Selection" [disabled]="this.invalid" (click)="this.setSelection()"/>
</div>



<div *ngIf="readyForBets; else notReady">
  <a routerLink="/betting/{{gameId}}/{{races[0].ID}}">
    READY TO PLACE BETS. CLICK HERE
  </a>
</div>

<ng-template #notReady>
  <h5>Waiting for all players to complete selections, please be patient...</h5>
  <h6 *ngFor="let w of waitingFor">{{w.PLAYER_NAME}}</h6>;
</ng-template>
</div>

